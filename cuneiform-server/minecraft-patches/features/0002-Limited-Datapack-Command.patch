From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Lexie Malina <alex@t-ch.net>
Date: Wed, 18 Feb 2026 18:12:10 -0600
Subject: [PATCH] Limited Datapack Command


diff --git a/net/minecraft/commands/Commands.java b/net/minecraft/commands/Commands.java
index c859197d643fd96ea2a5ef51837abc457e27f002..baecd9d3cdb83f6e4dd32d3ded6148d96c362fe3 100644
--- a/net/minecraft/commands/Commands.java
+++ b/net/minecraft/commands/Commands.java
@@ -201,7 +201,7 @@ public class Commands {
         //CloneCommands.register(this.dispatcher, context); // Folia - region threading - TODO
         DamageCommand.register(this.dispatcher, context);
         //DataCommands.register(this.dispatcher); // Folia - region threading - TODO
-        //DataPackCommand.register(this.dispatcher, context); // Folia - region threading - TODO
+        DataPackCommand.register(this.dispatcher, context); // Folia - region threading - // Cuneiform Limited Datapack Commands
         //DebugCommand.register(this.dispatcher); // Folia - region threading - TODO
         DefaultGameModeCommands.register(this.dispatcher);
         //DialogCommand.register(this.dispatcher, context); // Folia - region threading - TODO
diff --git a/net/minecraft/server/commands/DataPackCommand.java b/net/minecraft/server/commands/DataPackCommand.java
index 8c530eef0e416d8b96f190ada358d77d34dbc8ac..782430bdf562ce034fca2ca454deccc9fbef74b7 100644
--- a/net/minecraft/server/commands/DataPackCommand.java
+++ b/net/minecraft/server/commands/DataPackCommand.java
@@ -98,92 +98,96 @@ public class DataPackCommand {
         dispatcher.register(
             Commands.literal("datapack")
                 .requires(Commands.hasPermission(Commands.LEVEL_GAMEMASTERS))
-                .then(
-                    Commands.literal("enable")
-                        .then(
-                            Commands.argument("name", StringArgumentType.string())
-                                .suggests(UNSELECTED_PACKS)
-                                .executes(
-                                    context -> enablePack(
-                                        context.getSource(),
-                                        getPack(context, "name", true),
-                                        (currentPacks, pack) -> pack.getDefaultPosition().insert(currentPacks, pack, Pack::selectionConfig, false)
-                                    )
-                                )
-                                .then(
-                                    Commands.literal("after")
-                                        .then(
-                                            Commands.argument("existing", StringArgumentType.string())
-                                                .suggests(SELECTED_PACKS)
-                                                .executes(
-                                                    commandContext -> enablePack(
-                                                        commandContext.getSource(),
-                                                        getPack(commandContext, "name", true),
-                                                        (currentPacks, pack) -> currentPacks.add(
-                                                            currentPacks.indexOf(getPack(commandContext, "existing", false)) + 1, pack
-                                                        )
-                                                    )
-                                                )
-                                        )
-                                )
-                                .then(
-                                    Commands.literal("before")
-                                        .then(
-                                            Commands.argument("existing", StringArgumentType.string())
-                                                .suggests(SELECTED_PACKS)
-                                                .executes(
-                                                    context -> enablePack(
-                                                        context.getSource(),
-                                                        getPack(context, "name", true),
-                                                        (currentPacks, pack) -> currentPacks.add(
-                                                            currentPacks.indexOf(getPack(context, "existing", false)), pack
-                                                        )
-                                                    )
-                                                )
-                                        )
-                                )
-                                .then(Commands.literal("last").executes(context -> enablePack(context.getSource(), getPack(context, "name", true), List::add)))
-                                .then(
-                                    Commands.literal("first")
-                                        .executes(
-                                            context -> enablePack(
-                                                context.getSource(), getPack(context, "name", true), (currentPacks, pack) -> currentPacks.add(0, pack)
-                                            )
-                                        )
-                                )
-                        )
-                )
-                .then(
-                    Commands.literal("disable")
-                        .then(
-                            Commands.argument("name", StringArgumentType.string())
-                                .suggests(SELECTED_PACKS)
-                                .executes(commandContext -> disablePack(commandContext.getSource(), getPack(commandContext, "name", false)))
-                        )
-                )
+//                CUNEIFORM - START Limited Datapack Commands
+//                .then(
+//                    Commands.literal("enable")
+//                        .then(
+//                            Commands.argument("name", StringArgumentType.string())
+//                                .suggests(UNSELECTED_PACKS)
+//                                .executes(
+//                                    context -> enablePack(
+//                                        context.getSource(),
+//                                        getPack(context, "name", true),
+//                                        (currentPacks, pack) -> pack.getDefaultPosition().insert(currentPacks, pack, Pack::selectionConfig, false)
+//                                    )
+//                                )
+//                                .then(
+//                                    Commands.literal("after")
+//                                        .then(
+//                                            Commands.argument("existing", StringArgumentType.string())
+//                                                .suggests(SELECTED_PACKS)
+//                                                .executes(
+//                                                    commandContext -> enablePack(
+//                                                        commandContext.getSource(),
+//                                                        getPack(commandContext, "name", true),
+//                                                        (currentPacks, pack) -> currentPacks.add(
+//                                                            currentPacks.indexOf(getPack(commandContext, "existing", false)) + 1, pack
+//                                                        )
+//                                                    )
+//                                                )
+//                                        )
+//                                )
+//                                .then(
+//                                    Commands.literal("before")
+//                                        .then(
+//                                            Commands.argument("existing", StringArgumentType.string())
+//                                                .suggests(SELECTED_PACKS)
+//                                                .executes(
+//                                                    context -> enablePack(
+//                                                        context.getSource(),
+//                                                        getPack(context, "name", true),
+//                                                        (currentPacks, pack) -> currentPacks.add(
+//                                                            currentPacks.indexOf(getPack(context, "existing", false)), pack
+//                                                        )
+//                                                    )
+//                                                )
+//                                        )
+//                                )
+//                                .then(Commands.literal("last").executes(context -> enablePack(context.getSource(), getPack(context, "name", true), List::add)))
+//                                .then(
+//                                    Commands.literal("first")
+//                                        .executes(
+//                                            context -> enablePack(
+//                                                context.getSource(), getPack(context, "name", true), (currentPacks, pack) -> currentPacks.add(0, pack)
+//                                            )
+//                                        )
+//                                )
+//                        )
+//                )
+//                .then(
+//                    Commands.literal("disable")
+//                        .then(
+//                            Commands.argument("name", StringArgumentType.string())
+//                                .suggests(SELECTED_PACKS)
+//                                .executes(commandContext -> disablePack(commandContext.getSource(), getPack(commandContext, "name", false)))
+//                        )
+//                )
+//               CUNEIFORM - END
                 .then(
                     Commands.literal("list")
                         .executes(commandContext -> listPacks(commandContext.getSource()))
                         .then(Commands.literal("available").executes(commandContext -> listAvailablePacks(commandContext.getSource())))
                         .then(Commands.literal("enabled").executes(commandContext -> listEnabledPacks(commandContext.getSource())))
                 )
-                .then(
-                    Commands.literal("create")
-                        .requires(Commands.hasPermission(Commands.LEVEL_OWNERS))
-                        .then(
-                            Commands.argument("id", StringArgumentType.string())
-                                .then(
-                                    Commands.argument("description", ComponentArgument.textComponent(buildContext))
-                                        .executes(
-                                            commandContext -> createPack(
-                                                commandContext.getSource(),
-                                                StringArgumentType.getString(commandContext, "id"),
-                                                ComponentArgument.getResolvedComponent(commandContext, "description")
-                                            )
-                                        )
-                                )
-                        )
-                )
+//                CUNEIFORM - START Limited Datapack Commands
+//                .then(
+//                    Commands.literal("create")
+//                        .requires(Commands.hasPermission(Commands.LEVEL_OWNERS))
+//                        .then(
+//                            Commands.argument("id", StringArgumentType.string())
+//                                .then(
+//                                    Commands.argument("description", ComponentArgument.textComponent(buildContext))
+//                                        .executes(
+//                                            commandContext -> createPack(
+//                                                commandContext.getSource(),
+//                                                StringArgumentType.getString(commandContext, "id"),
+//                                                ComponentArgument.getResolvedComponent(commandContext, "description")
+//                                            )
+//                                        )
+//                                )
+//                        )
+//                )
+//               CUNEIFORM - END
         );
     }
 
